CREATE TABLE company (
companyID bigint,
companyName VARCHAR(255) NOT NULL,
PRIMARY KEY(companyID)
);

CREATE TABLE person (
personID bigint,
firstName VARCHAR(255) NOT NULL,
lastName VARCHAR(255) NOT NULL,
eMail VARCHAR(255) NOT NULL UNIQUE,
pass VARCHAR(255) NOT NULL,
PRIMARY KEY(personID)
);

CREATE TABLE personAddress (
    personID bigint,
    streetName VARCHAR(255),
    houseNumber int NOT NULL ,
    houseLetter varChar(1),
    houseFloor int,
    apartmentNumber int,
    postalCode int NOT NULL,
    CONSTRAINT persinIDCon FOREIGN KEY(personID) REFERENCES person(personID)
);

CREATE TABLE book (
isbn bigint,
title VARCHAR(255) NOT NULL,
numberOfPages int NOT NULL,
yearPublished int NOT NULL,
publisherID bigint,
PRIMARY KEY(isbn),
CONSTRAINT publisherIDCon FOREIGN KEY(publisherID) REFERENCES company(companyID)
);

CREATE TABLE author (
authorID bigint,
firstName VARCHAR(255) NOT NULL,
lastName varChar(255) NOT NULL,
birthYear int NOT NULL,
PRIMARY KEY(authorID)
);

CREATE TABLE authorsOfBook (
authorID bigint NOT NULL,
isbn bigint NOT NULL,
CONSTRAINT authorIDCon FOREIGN KEY(authorID) REFERENCES author(authorID),
CONSTRAINT isbnCon FOREIGN KEY(isbn) REFERENCES book(isbn),
CONSTRAINT checkIFIsInTable UNIQUE(isbn,authorID)
);

CREATE TABLE branch (
branchID bigint,
branchName VARCHAR(255) NOT NULL,
PRIMARY KEY(branchID)
);

CREATE TABLE branchBook (
branchBookID bigint,
isbn bigint,
branchID bigint,
PRIMARY KEY(branchBookID),
CONSTRAINT isbnConstraint FOREIGN KEY(isbn) REFERENCES book(isbn),
CONSTRAINT branchIDCon FOREIGN KEY(branchID) REFERENCES branch(branchID)
);

CREATE TABLE lentBook (
branchBookID bigint NOT NULL,
personID bigint NOT NULL,
lentDate date NOT NULL,
dueDate date NOT NULL,
CONSTRAINT branchBookIDCon FOREIGN KEY(branchBookID) REFERENCES branchBook(branchBookID),
CONSTRAINT personIDCon FOREIGN KEY(personID) REFERENCES person(personID)
);

CREATE TABLE lentBooksLog (
branchBookID bigint NOT NULL,
personID bigint NOT NULL,
lentDate date NOT NULL,
dueDate date NOT NULL,
returnedDate date NOT NULL,
CONSTRAINT branchBID FOREIGN KEY(branchBookID) REFERENCES branchBook(branchBookID),
CONSTRAINT pIDCon FOREIGN KEY(personID) REFERENCES person(personID)
);